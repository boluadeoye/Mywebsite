<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boluadeoye — writings</title>

  <style>
    /* ========== THEME (Dark + Orange) ========== */
    :root{
      --bg:#0f172a;          /* page background (dark navy) */
      --panel:#111a2e;       /* header / cards */
      --ink:#e5eefc;         /* primary text */
      --muted:#a7b3cc;       /* secondary text */
      --orange:#f59e0b;      /* accent / CTA */
      --orange-ink:#0b0f19;  /* text on orange */
      --ring:rgba(245,158,11,.25);
      --radius:16px;
      --serif: ui-serif, Georgia, "Times New Roman", serif;
    }

    /* Base reset */
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0;
      background:var(--bg);
      color:var(--ink);
      font: 16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    img{ max-width:100%; display:block }
    a{ color:inherit; text-decoration:none }
    .wrap{ max-width:1100px; margin:0 auto; padding:0 1.2rem }

    /* ========== HEADER ========== */
    header{
      position:sticky; top:0; z-index:50;
      background:var(--panel);
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .header-row{
      display:flex; align-items:center; justify-content:space-between;
      min-height:64px;
    }
    /* Brand (gradient dot + name) */
    .brand{
      display:flex; align-items:center; gap:.5rem;
      margin-left:1rem;                 /* breathing space from edge */
      text-decoration:none;
    }
    .brand .dot{
      width:28px; height:28px; border-radius:50%;
      background:
        radial-gradient(65% 65% at 30% 30%, #ffd27a 0%, #f59e0b 55%, #a55e03 100%);
      box-shadow:0 0 0 3px rgba(245,158,11,.12), 0 6px 26px rgba(245,158,11,.25);
      flex:0 0 28px;
    }
    .brand h1{
      margin:0;
      font-size:1.25rem;
      font-weight:700;
      color:var(--ink);                 /* bright text */
      letter-spacing:.2px;
    }

    /* Top nav (desktop) */
    .top-nav{ display:none; gap:1.1rem; align-items:center; }
    .top-nav a{
      opacity:.9; color:var(--ink);
      font-weight:600;
    }
    .top-nav a:hover{ color:var(--orange); }

    /* Hamburger (mobile) */
    .hamburger{
      width:42px; height:42px; margin-right:.5rem;
      display:flex; align-items:center; justify-content:center;
      border-radius:10px; border:1px solid rgba(255,255,255,.06);
      background:rgba(255,255,255,.02);
      color:var(--ink);
    }
    .hamburger svg{ width:22px; height:22px }

    /* Sidebar menu */
    .side-menu{
      position:fixed; top:0; left:-260px; z-index:60;
      width:240px; height:100%; padding:2rem 1rem;
      display:flex; flex-direction:column; gap:1rem;
      background:var(--panel);
      box-shadow:2px 0 10px rgba(0,0,0,.35);
      transition:left .3s ease;
    }
    .side-menu a{
      background:var(--chip, #0d1527);
      color:var(--ink); font-weight:600;
      padding:.85rem 1rem; border-radius:14px;
      border:1px solid rgba(255,255,255,.06);
    }
    .side-menu.active{ left:0 }
    .overlay{
      position:fixed; inset:0; background:rgba(0,0,0,.55);
      z-index:40; display:none;
    }
    .overlay.show{ display:block }

    /* ========== HERO ========== */
    .hero{ padding:2.2rem 0 1rem; text-align:center; }
    .hero-photo{
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.06);
      border-radius:24px; overflow:hidden;
      margin:0 auto;                 /* center by default */
      max-width:400px;
    }
    .hero-photo img{ width:100%; height:auto; display:block }
    .chip{
      display:inline-block;
      padding:.6rem 1rem; border-radius:999px;
      background:var(--panel);
      color:#c7d2fe; border:1px solid rgba(255,255,255,.08);
      position:relative;
      z-index:1;
      margin-top: 1.5rem;
    }
    .chip-ring::after{
      content:""; position:absolute; inset:-10px; z-index:-1;
      border-radius:999px;
      background:radial-gradient(circle at 50% 50%,
        rgba(245,158,11,.18) 0%,
        rgba(245,158,11,.10) 45%,
        rgba(245,158,11,0) 70%);
      filter:blur(6px);
    }
    .hero h2{
      font-family:var(--serif); font-weight:900; line-height:1.08;
      margin:.25rem 0 1rem 0;
      font-size: clamp(2.2rem, 3.8vw, 3.4rem);
    }
    .accent{ color:var(--orange) }
    .sub{ color:var(--muted); max-width:60ch; margin:0 auto 1rem }
    
    /* Search Bar */
    .search-container{
        width: 100%;
        max-width: 600px;
        margin: 0 auto 1.5rem;
        position: relative;
    }
    .search-input{
        width: 100%;
        padding: 1rem 1.5rem;
        border-radius: 12px;
        border: 1px solid rgba(255,255,255,0.1);
        background: rgba(255,255,255,0.05);
        color: var(--ink);
        font-size: 1rem;
        transition: border-color 0.2s ease;
    }
    .search-input:focus{
        outline: none;
        border-color: var(--orange);
    }

    /* Desktop: show top nav, hide hamburger */
    @media (min-width: 880px){
      .top-nav{ display:flex }
      .hamburger{ display:none }
    }

    /* ========== POSTS ========== */
    h3.section-title{
      font-size: clamp(1.4rem, 2.4vw, 2rem);
      margin:2.2rem 0 1rem;
    }
    #posts{ display:grid; gap:1rem }
    .post{
      background:var(--panel);
      border:1px solid rgba(255,255,255,.06);
      border-radius:18px; padding:1.1rem 1.25rem;
    }
    .post h3{ margin:1rem 0 .35rem; font-size:1.15rem }
    .post small{ color:var(--muted) }
    .post p{ color:var(--muted); margin:.5rem 0 0 }

    /* ========== FOOTER ========== */
    footer{
      color:var(--muted);
      border-top:1px solid rgba(255,255,255,.06);
      text-align:center;
      font-size:.85rem;
      padding:2rem 0 1.5rem;
      margin-top:1rem;
    }
  </style>
</head>
<body>

  <!-- Sidebar -->
  <nav id="sideMenu" class="side-menu" aria-label="Menu">
    <a href="#" data-filter="all">All writings</a>
    <a href="#" data-filter="poems">Poems</a>
    <a href="#" data-filter="stories">Stories</a>
    <a href="#" data-filter="faith">Faith</a>
    <a href="#" data-filter="devotional">Devotional</a>
    <a href="#" data-filter="articles">Articles</a>
    <a href="#" data-filter="essays">Essays</a>
    <a href="./about.html">About</a>
  </nav>
  <div id="menuOverlay" class="overlay" hidden></div>

  <!-- HEADER -->
  <header>
    <div class="wrap header-row">
      <button id="menuBtn" class="hamburger" aria-label="Open menu" aria-controls="sideMenu" aria-expanded="false">
        <!-- simple hamburger icon -->
        <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <rect x="3" y="6" width="18" height="2" rx="1"></rect>
          <rect x="3" y="11" width="18" height="2" rx="1"></rect>
          <rect x="3" y="16" width="18" height="2" rx="1"></rect>
        </svg>
      </button>

      <a class="brand" href="./">
        <span class="dot" aria-hidden="true"></span>
        <h1>Boluadeoye</h1>
      </a>

      <nav class="top-nav" aria-label="Filters">
        <a href="#" data-filter="all">All</a>
        <a href="#" data-filter="poems">Poems</a>
        <a href="#" data-filter="stories">Stories</a>
        <a href="#" data-filter="faith">Faith</a>
        <a href="#" data-filter="devotional">Devotional</a>
        <a href="#" data-filter="articles">Articles</a>
        <a href="#" data-filter="essays">Essays</a>
        <a href="./about.html">About</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <!-- HERO -->
    <section class="hero" aria-label="Intro">
      <figure class="hero-photo">
        <!-- Your centered photo -->
        <img src="images/bolu.jpg" alt="Boluadeoye" />
      </figure>

      <span class="chip chip-ring">Personal Blog</span>
      <h2><span class="accent">Words that glow</span> in the day.</h2>

      <div class="search-container">
          <input type="search" id="search-input" class="search-input" placeholder="Search for posts..." />
      </div>
      
      <p class="sub">Short essays, project notes, and ideas in motion — updated often.</p>
    </section>

    <!-- POSTS -->
    <h3 id="latest" class="section-title">Latest writings</h3>
    <section id="posts" aria-live="polite">
      <p style="color:var(--muted)">Loading…</p>
    </section>
  </main>

  <footer>
    <div class="wrap">© Boluadeoye <span id="current-year"></span> · All rights reserved.</div>
  </footer>

  <script>
    // ========== MENU TOGGLE ==========
    const menuBtn     = document.getElementById('menuBtn');
    const sideMenu    = document.getElementById('sideMenu');
    const menuOverlay = document.getElementById('menuOverlay');

    function closeMenu(){
      sideMenu.classList.remove('active');
      menuOverlay.classList.remove('show');
      menuOverlay.hidden = true;
      menuBtn.setAttribute('aria-expanded','false');
    }
    function openMenu(){
      sideMenu.classList.add('active');
      menuOverlay.classList.add('show');
      menuOverlay.hidden = false;
      menuBtn.setAttribute('aria-expanded','true');
    }
    menuBtn.addEventListener('click', ()=>{
      if(sideMenu.classList.contains('active')) closeMenu(); else openMenu();
    });
    menuOverlay.addEventListener('click', closeMenu);

    // ========== POSTS LOADER + FILTER/SEARCH ==========
    let allPosts = [];
    const postsEl = document.getElementById('posts');
    const searchInput = document.getElementById('search-input');

    async function loadPosts(){
      try{
        const url = './posts.json';
        const res  = await fetch(url.toString(), { cache:'no-store' });
        if(!res.ok) throw new Error(`HTTP ${res.status}: posts.json not found`);
        const data = await res.json();
        if(!Array.isArray(data)) throw new Error('posts.json must be an array');
        data.sort((a,b)=> String(b.date).localeCompare(String(a.date)));
        allPosts = data;
        renderPosts();
      }catch(err){
        postsEl.innerHTML = `<p style="color:var(--muted)">Couldn't load posts. (${String(err.message)})</p>`;
        console.error(err);
      }
    }

    // Renders posts based on a filter or search query
    function renderPosts(filter='', query=''){
      const lowerQuery = query.toLowerCase().trim();
      const filteredList = allPosts.filter(p => {
        const matchesFilter = (filter === 'all' || !filter || (p.type && p.type.toLowerCase() === filter));
        const matchesQuery = (
          !lowerQuery || 
          (p.title && p.title.toLowerCase().includes(lowerQuery)) ||
          (p.excerpt && p.excerpt.toLowerCase().includes(lowerQuery))
        );
        return matchesFilter && matchesQuery;
      });

      if(!filteredList.length){
        postsEl.innerHTML = `<p style="color:var(--muted)">No posts found matching that criteria.</p>`;
        return;
      }

      postsEl.innerHTML = filteredList.map(p=>{
        const mins   = p.minutes ? ` • ~${p.minutes} min read` : '';
        const type   = p.type ? ` • <em>${String(p.type).toUpperCase()}</em>` : '';
        const date   = p.date || '';
        const link   = `post.html?file=${encodeURIComponent(p.file)}`;
        const excerpt= p.excerpt ? `<p>${p.excerpt}</p>` : '';
        const title  = p.title || 'Untitled';

        return `
          <article class="post">
            <h3><a href="${link}" style="color:inherit;text-decoration:none">${title}</a></h3>
            <small>${date}${mins}${type}</small>
            ${excerpt}
          </article>
        `;
      }).join('');
    }

    // Event listeners for filtering and searching
    document.querySelectorAll('[data-filter]').forEach(a=>{
      a.addEventListener('click', (e)=>{
        e.preventDefault();
        const f = a.getAttribute('data-filter');
        searchInput.value = ''; // Clear search when a filter is clicked
        renderPosts(f, '');
        closeMenu(); // close if coming from sidebar
      });
    });

    searchInput.addEventListener('input', (e) => {
      const query = e.target.value;
      renderPosts('', query);
    });

    // Set the current year in the footer
    document.getElementById('current-year').textContent = new Date().getFullYear();

    document.addEventListener('DOMContentLoaded', loadPosts);
  </script>
</body>
</html>

