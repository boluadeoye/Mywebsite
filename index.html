<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boluadeoye — Home</title>
  <base href="/Mywebsite/">
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111a2e;
      --ink: #e5eefc;
      --muted: #a7b3cc;
      --orange: #f59e0b;
      --orange-ink: #0b0f19;
      --ring: rgba(245,158,11,.25);
      --radius: 16px;
    }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--ink);
      font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
    }
    header {
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .logo {
      font-weight: bold;
      color: var(--orange);
    }
    #menuBtn {
      background: none;
      border: none;
      color: var(--ink);
      font-size: 1.5rem;
    }
    #sideMenu {
      position: fixed;
      top: 0;
      left: 0;
      width: 70%;
      max-width: 300px;
      height: 100%;
      background: var(--panel);
      padding: 1rem;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      z-index: 1000;
    }
    #sideMenu.active {
      transform: translateX(0);
    }
    #menuOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 999;
      display: none;
    }
    #menuOverlay.show {
      display: block;
    }
    #sideMenu a {
      display: block;
      margin: 0.5rem 0;
      color: var(--muted);
      text-decoration: none;
    }
    .hero {
      text-align: center;
      padding: 2rem 1rem;
    }
    .hero img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
    }
    .hero h1 {
      margin-top: 1rem;
      font-size: 1.5rem;
      color: var(--orange);
    }
    .hero p {
      font-style: italic;
      color: var(--muted);
    }
    .section {
      padding: 1rem;
    }
    .post {
      background: var(--panel);
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1rem;
      border: 1px solid rgba(255,255,255,0.05);
    }
    .post h3 {
      margin: 0;
      color: var(--ink);
    }
    .post small {
      color: var(--muted);
    }
    footer {
      text-align: center;
      padding: 2rem 1rem;
      font-size: 0.9rem;
      color: var(--muted);
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">Boluadeoye</div>
    <button id="menuBtn" aria-expanded="false">☰</button>
  </header>

  <div id="menuOverlay" hidden></div>
  <nav id="sideMenu">
    <a href="#" data-filter="all">All writings</a>
    <a href="#" data-filter="poem">Poems</a>
    <a href="#" data-filter="story">Stories</a>
    <a href="#" data-filter="faith">Faith</a>
    <a href="#" data-filter="devotional">Devotional</a>
    <a href="#" data-filter="article">Articles</a>
    <a href="#" data-filter="essay">Essays</a>
    <a href="about.html">About</a>
  </nav>

  <section class="hero">
    <img src="images/bolu.jpg" alt="Boluadeoye" />
    <h1>Personal Blog</h1>
    <p>Words that glow in the day.</p>
  </section>

  <section class="section">
    <h2 style="color:var(--orange)">Latest Writings</h2>
    <div id="posts"></div>
  </section>

  <footer>© Boluadeoye 2025 • All rights reserved.</footer>

  <script>
    const menuBtn     = document.getElementById('menuBtn');
    const sideMenu    = document.getElementById('sideMenu');
    const menuOverlay = document.getElementById('menuOverlay');

    function closeMenu(){
      sideMenu.classList.remove('active');
      menuOverlay.classList.remove('show');
      menuOverlay.hidden = true;
      menuBtn.setAttribute('aria-expanded','false');
    }
    function openMenu(){
      sideMenu.classList.add('active');
      menuOverlay.classList.add('show');
      menuOverlay.hidden = false;
      menuBtn.setAttribute('aria-expanded','true');
    }
    menuBtn.addEventListener('click', ()=>{
      if(sideMenu.classList.contains('active')) closeMenu(); else openMenu();
    });
    menuOverlay.addEventListener('click', closeMenu);

    let allPosts = [];
    const postsEl = document.getElementById('posts');

    async function loadPosts(){
      try{
        const url = new URL('posts.json', location.origin);
        url.searchParams.set('v','9');
        const res = await fetch(url.toString(), { cache:'no-store' });
        if(!res.ok) throw new Error(`HTTP ${res.status}: posts.json not found`);
        const data = await res.json();
        if(!Array.isArray(data)) throw new Error('posts.json must be an array');
        data.sort((a,b)=> String(b.date).localeCompare(String(a.date)));
        allPosts = data;
        renderPosts('all');
      }catch(err){
        postsEl.innerHTML = `<p style="color:#ffbdf2">Couldn't load posts. (${String(err.message)})</p>`;
        console.error(err);
      }
    }

    function renderPosts(filter='all'){
      const list = (filter==='all')
        ? allPosts.slice(0,3)
        : allPosts.filter(p => (p.type||'').toLowerCase() === filter);

      if(!list.length){
        postsEl.innerHTML = `<p style="color:var(--muted)">No posts found.</p>`;
        return;
      }

      postsEl.innerHTML = list.map(p=>{
        const link   = p.url ? p.url : (p.file ? ('post.html?file=' + encodeURIComponent(p.file)) : '#');
        const title  = p.title || 'Untitled';
        const date   = p.date || '';
        const excerpt= p.excerpt ? `<p>${p.excerpt}</p>` : '';
        const type   = p.type ? ` • <em>${String(p.type).toUpperCase()}</em>` : '';

        return `
          <article class="post">
            <h3><a href="${link}" style="color:inherit;text-decoration:none">${title}</a></h3>
            <small>${date}${type}</small>
            ${excerpt}
          </article>
        `;
      }).join('');
    }

    document.querySelectorAll('[data-filter]').forEach(a=>{
      a.addEventListener('click', (e)=>{
        e.preventDefault();
        const f = a.getAttribute('data-filter');
        renderPosts(f);
        closeMenu();
      });
    });

    document.addEventListener('DOMContentLoaded', loadPosts);
  </script>
</body>
</html>
