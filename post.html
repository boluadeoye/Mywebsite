<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Post — Boluadeoye</title>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <style>
  :root {
    --bg: #0f172a; --panel: #111a2e; --panel-hover: #1a2341;
    --ink: #e5eefc; --muted: #94a3b8;
    --orange: #f59e0b; --orange-light: #fbbf24; --orange-ink: #0b0f19;
    --ring: rgba(245,158,11,.25); --radius: 16px;
    --serif: ui-serif, Georgia, "Times New Roman", serif;
    --font: "Open Sans", system-ui, -apple-system, "Segoe UI", Roboto, Inter, Arial, sans-serif;
    --transition: cubic-bezier(.4,0,.2,1);
    --red: #ef4444; --red-soft: rgba(239,68,68,.12);
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;scroll-behavior:smooth}
  body{
    background:var(--bg); color:var(--ink);
    font:16px/1.7 var(--font);
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    overflow-x:hidden; position:relative; text-rendering:optimizeLegibility;
  }
  a{color:inherit;text-decoration:none;transition:all .3s var(--transition)}
  .wrap{max-width:1100px;margin:0 auto;padding:0 1.5rem;position:relative;z-index:1}

  header{position:sticky;top:0;z-index:100;background:rgba(15,23,42,.98);border-bottom:1px solid rgba(245,158,11,.15)}
  .header-row{display:flex;align-items:center;justify-content:space-between;min-height:70px;gap:1.5rem;padding:0 .5rem}
  .brand{display:flex;align-items:center;gap:.75rem;flex-shrink:0;transition:transform .3s var(--transition)}
  .brand:hover{transform:translateX(3px)}
  .dot{
    width:34px;height:34px;border-radius:50%;
    background:radial-gradient(circle at 30% 30%,#ffd27a 0%,#f59e0b 40%,#d97706 100%);
    border:1px solid rgba(245,158,11,.3);
    box-shadow:0 0 0 2px rgba(245,158,11,.15),0 4px 12px rgba(245,158,11,.2);
    position:relative;z-index:0;animation:dot-breathe 3.8s ease-in-out infinite;
    transition:transform .6s var(--transition)
  }
  .dot::after{content:'';position:absolute;inset:-8px;border-radius:50%;
    background:radial-gradient(circle at 50% 50%,rgba(245,158,11,.45) 0%,rgba(245,158,11,.16) 35%,rgba(245,158,11,0) 70%);
    filter:blur(10px);opacity:.75;animation:dot-halo 3.8s ease-in-out infinite;pointer-events:none}
  @keyframes dot-breathe{0%,100%{transform:scale(1)}50%{transform:scale(1.06)}}
  @keyframes dot-halo{0%,100%{opacity:.55;transform:scale(1)}50%{opacity:.9;transform:scale(1.12)}}
  @media (prefers-reduced-motion: reduce){ .dot, .dot::after { animation:none !important; } }
  .brand h1{font-size:1.3rem;font-weight:800;color:var(--ink);letter-spacing:-.5px;font-family:var(--serif)}

  .top-nav{display:none;gap:.5rem;align-items:center;flex-wrap:wrap}
  .top-nav a{padding:.45rem .9rem;border-radius:999px;border:1px solid transparent;font-weight:600;font-size:.87rem}
  .top-nav a:hover,.top-nav a.active{color:var(--orange);border-color:var(--orange);transform:translateY(-1px)}

  .hamburger{width:42px;height:42px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:rgba(255,255,255,.03);border:1px solid rgba(245,158,11,.2);color:var(--ink);cursor:pointer;transition:all .3s ease}
  .hamburger:hover{background:rgba(245,158,11,.1);transform:rotate(10deg)}
  .hamburger svg{width:19px;height:19px}

  .side-menu{position:fixed;top:0;left:-280px;z-index:200;width:260px;height:100%;padding:2.5rem 1.2rem 2rem;display:flex;flex-direction:column;gap:.6rem;background:var(--panel);border-right:1px solid rgba(245,158,11,.2);transition:left .3s var(--transition)}
  .side-menu.active{left:0}
  .side-menu a{padding:.9rem 1.25rem;border-radius:8px;background:transparent;color:var(--ink);font-weight:600;font-size:.92rem;border:1px solid transparent;transition:all .2s ease}
  .side-menu a:hover,.side-menu a.active{background:rgba(245,158,11,.1);border-color:var(--orange);color:var(--orange);transform:translateX(5px)}
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:150;display:none;cursor:pointer}
  .overlay.show{display:block}
  @media(min-width:880px){.top-nav{display:flex}.hamburger{display:none}}

  .post-container{
    margin:1.25rem 0 2.25rem;
    background:var(--panel); border-radius:24px;
    border:1px solid rgba(245,158,11,.15);
    box-shadow:0 20px 60px rgba(0,0,0,.3), inset 0 1px 0 rgba(255,255,255,.05);
    overflow:hidden;
  }
  .content-wrapper{
    padding:2.75rem 1.5rem;
    margin:0 auto;
    max-width:1100px;
  }

  .post-header{
    text-align:center;
    padding:1.5rem 0 1rem;
    max-width:90ch;
    margin:0 auto;
  }
  .post-meta{
    display:flex;
    justify-content:center;
    align-items:center;
    gap:.75rem;
    flex-wrap:wrap;
    margin-bottom:1rem;
  }
  .meta-item{
    display:inline-flex;
    align-items:center;
    gap:.5rem;
    padding:.35rem .85rem;
    background:rgba(245,158,11,.08);
    border-radius:999px;
    font-size:.9rem;
    color:var(--muted);
    border:1px solid rgba(245,158,11,.15);
  }
  .meta-red{
    background:var(--red-soft);
    color:var(--red);
    border-color:rgba(239,68,68,.25);
  }
  .post-title{
    font-family:var(--font);
    font-size:clamp(1.8rem, 3.5vw, 2.5rem);
    font-weight:800;
    line-height:1.2;
    margin:.5rem auto;
    background:linear-gradient(135deg, var(--orange), var(--orange-light));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
    max-width:90ch;
  }

  .cover-hero {
    max-width:1020px;
    margin:1rem auto;
    border-radius:14px;
    overflow:hidden;
    border:1px solid rgba(245,158,11,.15);
    background:rgba(255,255,255,.02);
  }
  .cover-hero img {
    width:100%;
    height:auto;
    display:block;
    aspect-ratio:16/9;
    object-fit:cover;
  }

  .post-content{
    max-width:90ch;
    margin:0 auto;
    font-family:var(--font);
    font-size:1.0125rem;
    line-height:1.85;
    color:rgba(229,238,252,.96);
    text-align:left;
  }
  .post-content h1{font-size:2.25rem;margin:2rem auto 1rem;text-align:center;}
  .post-content h2{font-size:1.875rem;margin:1.75rem auto 1rem;max-width:90ch;color:var(--orange);text-align:center;}
  .post-content h3{font-size:1.5rem;margin:1.25rem auto .75rem;max-width:90ch;color:#fbbf24;text-align:center;}
  .post-content p{margin:0 auto 1.1rem;max-width:90ch;text-align:center;}
  .post-content ul, .post-content ol{margin:1.1rem auto;padding-left:1.25rem;max-width:90ch;text-align:left;}
  .post-content li{margin:.5rem 0;}
  .post-content blockquote{
    position:relative;margin:1.6rem auto;padding:1.1rem 1.3rem;max-width:90ch;
    background:linear-gradient(135deg, rgba(245,158,11,.12), rgba(245,158,11,.06));
    border:1px solid rgba(245,158,11,.2);border-radius:14px;
    font-style:italic;font-size:1.08rem;line-height:1.75;
    color:var(--ink);border-left:4px solid var(--orange);text-align:center;
  }
  .post-content img{max-width:100%;height:auto;border-radius:12px;margin:1.5rem auto;display:block;box-shadow:0 15px 40px rgba(0,0,0,.3);}

  .post-nav{
    display:flex;justify-content:center;gap:1rem;padding:1.5rem 0;
    border-top:1px solid rgba(245,158,11,.15);flex-wrap:wrap;max-width:90ch;margin:0 auto;
  }
  .btn-chip{
    display:inline-flex;align-items:center;gap:.5rem;padding:.72rem 1.2rem;
    background:linear-gradient(135deg,var(--orange),var(--orange-light));
    color:var(--orange-ink);border-radius:999px;font-weight:800;font-size:.95rem;
    box-shadow:0 4px 15px rgba(245,158,11,.3);
  }
  .btn-chip.share-btn {
    background: linear-gradient(135deg, var(--orange), var(--orange-light));
    color: var(--orange-ink);border: none;cursor: pointer;font-weight: 600;
  }
  .btn-chip.share-btn:hover {transform: translateY(-2px);box-shadow: 0 4px 15px rgba(245,158,11,.4);}

  .loading-container{min-height:160px;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--muted);padding:2rem 1rem;text-align:center;}
  .loading-spinner{width:36px;height:36px;border:3px solid rgba(245,158,11,.2);border-top-color:var(--orange);border-radius:50%;animation:spin 1s linear infinite;margin-bottom:1rem;}
  @keyframes spin{to{transform:rotate(360deg)}}
  .error{text-align:center;padding:2rem;color:#ff6b6b}

  footer{background:var(--panel);border-top:1px solid rgba(255,255,255,.06);color:var(--muted);text-align:center;font-size:.85rem;padding:1.5rem 0;margin-top:1.5rem;}
  footer p {font-size: .85rem;line-height: 1.5;}

  .reflective-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      margin: 1.5rem 0;
      padding: 0.9rem 1.75rem;
      border: 1px solid rgba(245,158,11,.3);
      background: linear-gradient(135deg, rgba(245,158,11,.1), rgba(245,158,11,.2));
      color: var(--orange-light);
      border-radius: 999px;
      font-weight: 700;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      animation: pulse-glow 2.5s infinite ease-in-out;
  }
  .reflective-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(245,158,11,.25);
      border-color: var(--orange);
      animation-play-state: paused;
  }
  .reflective-btn .icon { font-size: 1.2rem; }
  @keyframes pulse-glow {
      0% { box-shadow: 0 0 8px rgba(245,158,11,0), 0 0 10px rgba(245,158,11,0); }
      50% { box-shadow: 0 0 12px rgba(245,158,11,.2), 0 0 16px rgba(245,158,11,.15); }
      100% { box-shadow: 0 0 8px rgba(245,158,11,0), 0 0 10px rgba(245,158,11,0); }
  }

  .reflective-overlay {
      position: fixed; inset: 0; background: rgba(15, 23, 42, 0.98);
      z-index: 300; display: none; opacity: 0; transition: opacity 0.4s ease;
      overflow-y: auto; padding: 2rem;
  }
  .reflective-overlay.show { display: block; opacity: 1; }
  .reflective-content { max-width: 700px; margin: 2rem auto; }
  .reflective-text { font-family: var(--serif); font-size: 1.8rem; line-height: 1.6; margin-bottom: 2rem; color: var(--ink); }
  .reflective-prompt { font-size: 1.2rem; color: var(--muted); margin-bottom: 1rem; }
  .reflective-textarea {
      width: 100%; min-height: 150px; background: var(--bg); border: 1px solid rgba(245,158,11,.2);
      border-radius: var(--radius); padding: 1rem; color: var(--ink); font-size: 1.1rem; line-height: 1.7; resize: vertical;
  }
  .reflective-nav { margin-top: 2rem; display: flex; justify-content: space-between; align-items: center; }
  .reflective-nav button { padding: 0.75rem 1.5rem; border: 1px solid var(--orange); background: transparent; color: var(--orange); border-radius: 999px; font-weight: 600; cursor: pointer; }
  .reflective-nav button.primary { background: var(--orange); color: var(--orange-ink); }
  .reflective-progress { font-size: 0.9rem; color: var(--muted); }


  @media (max-width: 600px) {
    .content-wrapper {padding:1.5rem 1rem;}
    .post-title {font-size:clamp(1.5rem, 3vw, 2rem);}
    .post-content p {font-size:1rem;}
    .post-meta {gap:.5rem;}
    footer {padding:1rem 0;font-size:.8rem;}
  }
  </style>
</head>
<body>
  <nav id="sideMenu" class="side-menu">
    <a href="./">Home</a>
    <a href="./posts.html">All Posts</a>
    <a href="./library.html">Library</a>
    <a href="./about.html">About</a>
  </nav>
  <div id="menuOverlay" class="overlay"></div>

  <header id="header">
    <div class="wrap header-row">
      <button id="menuBtn" class="hamburger" aria-label="Open menu" aria-expanded="false">
        <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><rect x="4" y="6" width="16" height="2" rx="1"/><rect x="4" y="11" width="16" height="2" rx="1"/><rect x="4" y="16" width="16" height="2" rx="1"/></svg>
      </button>
      <a class="brand" href="./"><span class="dot" aria-hidden="true"></span><h1>Boluadeoye</h1></a>
      <nav class="top-nav" aria-label="Primary">
        <a href="./">Home</a>
        <a href="./posts.html">All Posts</a>
        <a href="./library.html">Library</a>
        <a href="./about.html">About</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <div class="post-container">
      <div class="content-wrapper">
        <article id="post-content-wrapper">
          <div class="loading-container">
            <div class="loading-spinner"></div>
            <p>Loading your post...</p>
          </div>
        </article>
        
        <div id="disqus_thread" style="margin-top: 2rem;"></div>
        
      </div>
    </div>
  </main>
  
  <div id="reflective-overlay" class="reflective-overlay">
    <div class="reflective-content" id="reflective-content-holder"></div>
  </div>

  <footer>
    <div class="wrap"><p>© 2025 Boluadeoye • Crafted with passion</p></div>
  </footer>

  <script>
  (function(){
    var MANY_THRESHOLD = 50;
    var postData = null;
    var postFile = '';
    var markdownContent = '';

    function bindMenu(){
      var menuBtn = document.getElementById('menuBtn');
      var sideMenu = document.getElementById('sideMenu');
      var menuOverlay = document.getElementById('menuOverlay');
      if (!menuBtn || !sideMenu || !menuOverlay) return;

      function closeMenu(){
        sideMenu.classList.remove('active');
        menuOverlay.classList.remove('show');
        menuBtn.setAttribute('aria-expanded','false');
      }
      function openMenu(){
        sideMenu.classList.add('active');
        menuOverlay.classList.add('show');
        menuBtn.setAttribute('aria-expanded','true');
      }
      menuBtn.addEventListener('click', function(){
        if (sideMenu.classList.contains('active')) closeMenu(); else openMenu();
      });
      menuOverlay.addEventListener('click', closeMenu);
    }

    function normalizePath(p){
      if (!p) return '';
      return String(p).trim().replace(/^\.\/+/, '').replace(/^\/+/, '');
    }

    function firstImageFromMarkdown(md){
      if (!md) return '';
      var m1 = md.match(/!\[.*?\]\((.*?)\)/);
      if (m1 && m1[1]) return m1[1].trim();
      var m2 = md.match(/<img[^>]+src=["']([^"']+)["'][^>]*>/i);
      if (m2 && m2[1]) return m2[1].trim();
      return '';
    }

    function processMarkdown(text){
      if (!text || typeof text !== 'string') return '<p>Content unavailable.</p>';
      if (typeof marked === 'undefined') return '<p>Error: Markdown parser not loaded.</p>';
      return marked.parse(text, { breaks: true });
    }

    function renderError(container, message){
      container.innerHTML = 
        '<div class="error">' +
        '  <h2>Unable to Load Post</h2>' +
        '  <p>' + message + '</p>' +
        '  <div class="post-nav" style="justify-content:center;">' +
        '    <a href="./" class="btn-chip">← Return to Homepage</a>' +
        '  </div>' +
        '</div>';
    }
    
    function loadDisqus(postFileIdentifier) {
        if (!postFileIdentifier) return;
        if (window.DISQUS) {
            window.DISQUS.reset({
                reload: true,
                config: function () {
                    this.page.url = window.location.href;
                    this.page.identifier = postFileIdentifier;
                }
            });
        } else {
            var disqus_config = function () {
                this.page.url = window.location.href;
                this.page.identifier = postFileIdentifier;
            };
            var d = document, s = d.createElement('script');
            s.src = 'https://bolus-personal-blog.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        }
    }

    function sharePost() {
      var pageUrl = window.location.href;
      var pageTitle = document.title;
      var excerpt = (postData && postData.excerpt) ? postData.excerpt : 'Check out this post!';
      if (navigator.share) {
        navigator.share({ title: pageTitle, text: excerpt, url: pageUrl });
      } else {
        var whatsappUrl = 'https://api.whatsapp.com/send?text=' + encodeURIComponent(pageTitle + ' - ' + excerpt + ' ' + pageUrl);
        window.open(whatsappUrl, '_blank');
      }
    }
    window.sharePost = sharePost;
    
    function startReflectiveReading() {
        var overlay = document.getElementById('reflective-overlay');
        var contentEl = document.getElementById('reflective-content-holder');
        var paragraphs = markdownContent.split(/\n\s*\n/).filter(p => p.trim() !== '');
        var prompts = postData.reflection_prompts;
        var storageKey = `reflections-${postData.file}`;
        var responses = JSON.parse(localStorage.getItem(storageKey)) || [];
        for(let i = 0; i < prompts.length; i++) {
          if (typeof responses[i] === 'undefined') responses[i] = '';
        }

        var currentStep = 0;
        var stepMap = [];
        var paragraphIndex = 0;
        var promptIndex = 0;
        var promptsPerSection = Math.ceil(paragraphs.length / prompts.length);
        
        while(paragraphIndex < paragraphs.length || promptIndex < prompts.length) {
          stepMap.push({ type: 'paragraph', index: paragraphIndex++ });
          if (paragraphIndex > 0 && paragraphIndex % promptsPerSection === 0 && promptIndex < prompts.length) {
            stepMap.push({ type: 'prompt', index: promptIndex++ });
          }
        }
        if (promptIndex < prompts.length) {
           stepMap.push({ type: 'prompt', index: promptIndex++ });
        }
        var totalSteps = stepMap.length;

        function renderStep(stepIndex) {
          if (stepIndex < 0 || stepIndex >= totalSteps) {
            renderSummary();
            return;
          }
          currentStep = stepIndex;
          var step = stepMap[stepIndex];

          if (step.type === 'prompt') {
            var currentPromptIndex = step.index;
            contentEl.innerHTML = `
              <p class="reflective-prompt">${prompts[currentPromptIndex]}</p>
              <textarea class="reflective-textarea" placeholder="Your private thoughts...">${responses[currentPromptIndex]}</textarea>
              <div class="reflective-nav">
                <button id="reflective-prev">Back</button>
                <span class="reflective-progress">Step ${currentStep + 1} of ${totalSteps}</span>
                <button id="reflective-next" class="primary">Save & Continue</button>
              </div>
            `;
            var textarea = contentEl.querySelector('textarea');
            textarea.focus();
            document.getElementById('reflective-next').onclick = function() {
              responses[currentPromptIndex] = textarea.value;
              localStorage.setItem(storageKey, JSON.stringify(responses));
              renderStep(currentStep + 1);
            };
            document.getElementById('reflective-prev').onclick = function() { renderStep(currentStep - 1); };
          } else if (step.type === 'paragraph') {
             contentEl.innerHTML = `
              <div class="reflective-text">${processMarkdown(paragraphs[step.index])}</div>
              <div class="reflective-nav">
                ${currentStep > 0 ? '<button id="reflective-prev">Back</button>' : '<div></div>'}
                <span class="reflective-progress">Step ${currentStep + 1} of ${totalSteps}</span>
                <button id="reflective-next" class="primary">Next</button>
              </div>
            `;
            document.getElementById('reflective-next').onclick = function() { renderStep(currentStep + 1); };
            if(currentStep > 0) {
              document.getElementById('reflective-prev').onclick = function() { renderStep(currentStep - 1); };
            }
          }
        }
        
        function renderSummary() {
            var summaryHTML = responses.map((response, index) => `
              <div style="margin-bottom: 1.5rem;">
                <p class="reflective-prompt">${prompts[index]}</p>
                <div class="reflective-text" style="font-size: 1.1rem; background: var(--panel); border: 1px solid rgba(245,158,11,.1); padding: 1rem; border-radius: var(--radius); white-space: pre-wrap;">${response.trim() || '<i>No response saved.</i>'}</div>
              </div>`).join('');

            contentEl.innerHTML = `
              <h1 class="post-title" style="text-align:left; font-size: 2rem;">Your Reflections</h1>
              <p class="reflective-prompt">This is for your eyes only and is stored on this device.</p>
              ${summaryHTML}
              <div class="reflective-nav">
                 <button id="reflective-prev">Back to last step</button>
                 <button id="reflective-close" class="primary">Finish</button>
              </div>
            `;
            document.getElementById('reflective-close').onclick = function() { overlay.classList.remove('show'); };
            document.getElementById('reflective-prev').onclick = function() { renderStep(totalSteps - 1); };
        }
        
        overlay.classList.add('show');
        renderStep(0);
    }


    function loadPost(){
      var container = document.getElementById('post-content-wrapper');
      if (!container) return;
      container.innerHTML = '<div class="loading-container"><div class="loading-spinner"></div><p>Loading your post...</p></div>';
      try {
        var urlParams = new URLSearchParams(window.location.search);
        var file = urlParams.get('file');
        postFile = file;

        if (!file) {
          renderError(container, 'No post file specified in URL.');
          return;
        }

        fetch('./Posts.json', { cache: 'no-store' })
          .then(res => {
            if (!res.ok) throw new Error('Could not load Posts.json (Status: ' + res.status + ')');
            return res.json();
          })
          .then(posts => {
            postData = posts.find(p => p && normalizePath(p.file) === normalizePath(file));
            if (!postData) throw new Error('Post data not found in Posts.json for file: ' + file);
            return fetch(file, { cache: 'no-store' });
          })
          .then(mdRes => {
            if (!mdRes.ok) throw new Error('Failed to load Markdown file at ' + file + ' (Status: ' + mdRes.status + ')');
            return mdRes.text();
          })
          .then(markdown => {
            markdownContent = markdown;
            var title = postData.title;
            document.title = title + ' - Boluadeoye';
            
            var coverUrl = postData.cover ? postData.cover : firstImageFromMarkdown(markdown);
            var mdForRender = markdown;

            if (coverUrl && normalizePath(firstImageFromMarkdown(markdown)) === normalizePath(coverUrl)) {
                mdForRender = markdown.replace(/!\[.*?\]\(.*?\)/, '');
            }

            var contentHTML = processMarkdown(mdForRender);
            var dateStr = new Date(postData.date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            var typeStr = postData.type;
            
            var coverHTML = coverUrl ? '<figure class="cover-hero"><img src="' + coverUrl + '" alt="' + title + ' cover"></figure>' : '';
            var viewedLabel = (postData.views >= MANY_THRESHOLD) ? 'Viewed by many' : 'Viewed';

            var mainHTML =
              '<div class="post-header">' +
              '  <div class="post-meta">' +
              (dateStr ? '<span class="meta-item">📅 ' + dateStr + '</span>' : '') +
              (typeStr ? '<span class="meta-item">📁 ' + typeStr + '</span>' : '') +
              '    <span class="meta-item meta-red">❤️ Liked</span>' +
              '    <span class="meta-item meta-red">👁️ ' + viewedLabel + '</span>' +
              '  </div>' +
              '  <h1 class="post-title">' + title + '</h1>' +
              '</div>' +
              '<div id="reflective-btn-container" style="text-align:center;"></div>' +
              coverHTML +
              '<div class="post-content">' + contentHTML + '</div>' +
              '<nav class="post-nav">' +
              '  <a href="./" class="btn-chip">← Back to Home</a>' +
              '  <a href="./posts.html" class="btn-chip">View All Posts →</a>' +
              '  <button class="btn-chip share-btn" onclick="sharePost()">Share Post 📤</button>' +
              '</nav>';
            
            container.innerHTML = mainHTML;
            
            if (postData.reflection_prompts && postData.reflection_prompts.length > 0) {
              var btnContainer = document.getElementById('reflective-btn-container');
              if (btnContainer) {
                  var btn = document.createElement('button');
                  btn.className = 'reflective-btn';
                  btn.innerHTML = '<span class="icon">📖</span> Read Reflectively';
                  btn.onclick = startReflectiveReading;
                  btnContainer.appendChild(btn);
              }
            }

            loadDisqus(postFile);
          })
          .catch(err => {
            console.error('Post load error:', err);
            renderError(container, err.message);
          });
      } catch (error) {
        console.error('Initialization error:', error);
        renderError(container, error.message);
      }
    }

    function init() {
      bindMenu();
      loadPost();
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }
  })();
  </script>
</body>
</html>
