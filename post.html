<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Boluadeoye</title>
  <style>
    :root {
      --bg: #0f172a; --panel: #111a2e; --panel-hover: #1a2341;
      --ink: #e5eefc; --muted: #94a3b8;
      --orange: #f59e0b; --orange-light: #fbbf24; --orange-ink: #0b0f19;
      --ring: rgba(245,158,11,.25); --radius: 16px;
      --serif: ui-serif, Georgia, "Times New Roman", serif;
      --transition: cubic-bezier(.4,0,.2,1);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{background:var(--bg);color:var(--ink);font:16px/1.7 system-ui,-apple-system,'Segoe UI',Roboto,Inter,Arial,sans-serif;overflow-x:hidden;position:relative}
    a{color:inherit;text-decoration:none;transition:all .3s var(--transition)}
    .wrap{max-width:800px;margin:0 auto;padding:0 1.5rem;position:relative;z-index:1}

    header{position:sticky;top:0;z-index:100;background:rgba(15,23,42,.98);border-bottom:1px solid rgba(245,158,11,.15)}
    .header-row{display:flex;align-items:center;justify-content:space-between;min-height:70px;gap:1.5rem;padding:0 .5rem}
    .brand{display:flex;align-items:center;gap:.75rem;flex-shrink:0;transition:transform .3s var(--transition)}
    .brand:hover{transform:translateX(3px)}
    .dot{width:34px;height:34px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#ffd27a 0%,#f59e0b 40%,#d97706 100%);border:1px solid rgba(245,158,11,.3);box-shadow:0 0 0 2px rgba(245,158,11,.15),0 4px 12px rgba(245,158,11,.2);position:relative;z-index:0;animation:dot-breathe 3.8s ease-in-out infinite}
    @keyframes dot-breathe{0%,100%{transform:scale(1)}50%{transform:scale(1.06)}}
    .brand h1{font-size:1.3rem;font-weight:800;color:var(--ink);letter-spacing:-.5px;font-family:var(--serif)}
    .top-nav{display:none;gap:.5rem;align-items:center;flex-wrap:wrap}
    .top-nav a{padding:.45rem .9rem;border-radius:999px;border:1px solid transparent;font-weight:600;font-size:.87rem}
    .top-nav a:hover,.top-nav a.active{color:var(--orange);border-color:var(--orange)}
    .hamburger{width:42px;height:42px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:rgba(255,255,255,.03);border:1px solid rgba(245,158,11,.2);color:var(--ink);cursor:pointer;transition:all .3s ease}
    .hamburger:hover{background:rgba(245,158,11,.1);transform:rotate(10deg)}
    .side-menu{position:fixed;top:0;left:-280px;z-index:200;width:260px;height:100%;padding:2.5rem 1.2rem 2rem;display:flex;flex-direction:column;gap:.6rem;background:var(--panel);border-right:1px solid rgba(245,158,11,.2);transition:left .3s var(--transition)}
    .side-menu.active{left:0}
    .side-menu a{padding:.9rem 1.25rem;border-radius:8px;font-weight:600;font-size:.92rem}
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:150;display:none;cursor:pointer}
    .overlay.show{display:block}
    @media(min-width:880px){.top-nav{display:flex}.hamburger{display:none}}
    
    .post-container { padding: 3rem 0; }
    .post-header { margin-bottom: 2rem; }
    .post-type { display: inline-block; padding: 0.25rem 0.75rem; background: rgba(245,158,11,.1); color: var(--orange); border-radius: 999px; font-size: 0.8rem; font-weight: 700; text-transform: capitalize; margin-bottom: 1rem; }
    .post-title { font-family: var(--serif); font-size: clamp(2rem, 5vw, 3rem); line-height: 1.1; margin-bottom: 1rem; }
    .post-meta { color: var(--muted); display: flex; gap: 1rem; align-items: center; }
    .post-content { font-size: 1.1rem; line-height: 1.8; color: var(--ink); }
    .post-content h2, .post-content h3 { font-family: var(--serif); margin: 2rem 0 1rem; }
    .post-content p { margin-bottom: 1.5rem; }
    .post-content blockquote { border-left: 3px solid var(--orange); padding-left: 1.5rem; margin: 1.5rem 0; font-style: italic; color: var(--muted); }
    .post-content a { color: var(--orange); text-decoration: underline; }
    .loading-container { text-align: center; padding: 4rem 0; }
    
    .share-section { margin-top: 3rem; padding-top: 2rem; border-top: 1px solid rgba(245,158,11,.15); }
    .share-section h3 { font-family: var(--serif); margin-bottom: 1rem; }
    .share-buttons { display: flex; gap: 1rem; }
    .share-btn { padding: 0.75rem 1.25rem; border: 1px solid rgba(245,158,11,.2); border-radius: 8px; font-weight: 600; display: flex; align-items: center; gap: 0.5rem; }
    .share-btn:hover { background: var(--panel-hover); border-color: var(--orange); }

    .reflective-btn {
      display: inline-block;
      margin-top: 1.5rem;
      padding: 0.75rem 1.5rem;
      border: 1px solid rgba(245,158,11,.3);
      background: rgba(245,158,11,.1);
      color: var(--orange);
      border-radius: 999px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .reflective-btn:hover { background: var(--orange); color: var(--orange-ink); }

    .reflective-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.98);
      z-index: 300;
      display: none;
      opacity: 0;
      transition: opacity 0.4s ease;
      overflow-y: auto;
      padding: 2rem;
    }
    .reflective-overlay.show { display: block; opacity: 1; }
    .reflective-content { max-width: 700px; margin: 2rem auto; }
    .reflective-text { font-family: var(--serif); font-size: 1.8rem; line-height: 1.6; margin-bottom: 2rem; color: var(--ink); }
    .reflective-prompt { font-size: 1.2rem; color: var(--muted); margin-bottom: 1rem; }
    .reflective-textarea {
      width: 100%;
      min-height: 150px;
      background: var(--bg);
      border: 1px solid rgba(245,158,11,.2);
      border-radius: var(--radius);
      padding: 1rem;
      color: var(--ink);
      font-size: 1.1rem;
      line-height: 1.7;
      resize: vertical;
    }
    .reflective-nav { margin-top: 2rem; display: flex; justify-content: space-between; align-items: center; }
    .reflective-nav button { padding: 0.75rem 1.5rem; border: 1px solid var(--orange); background: transparent; color: var(--orange); border-radius: 999px; font-weight: 600; cursor: pointer; }
    .reflective-nav button.primary { background: var(--orange); color: var(--orange-ink); }
    .reflective-progress { font-size: 0.9rem; color: var(--muted); }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
  <nav id="sideMenu" class="side-menu">
    <a href="./">Home</a>
    <a href="./posts.html">All Posts</a>
    <a href="./library.html">Library</a>
    <a href="./about.html">About</a>
  </nav>
  <div id="menuOverlay" class="overlay"></div>

  <header id="header" class="wrap">
    <div class="header-row">
      <button id="menuBtn" class="hamburger" aria-label="Open menu"><svg viewBox="0 0 24 24" fill="currentColor"><rect x="4" y="6" width="16" height="2" rx="1"/><rect x="4" y="11" width="16" height="2" rx="1"/><rect x="4" y="16" width="16" height="2" rx="1"/></svg></button>
      <a class="brand" href="./"><span class="dot"></span><h1>Boluadeoye</h1></a>
      <nav class="top-nav">
        <a href="./">Home</a>
        <a href="./posts.html">All Posts</a>
        <a href="./library.html">Library</a>
        <a href="./about.html">About</a>
      </nav>
    </div>
  </header>

  <main id="post-container" class="wrap post-container">
    <div class="loading-container">Loading post...</div>
  </main>

  <div id="reflective-overlay" class="reflective-overlay">
    <div class="reflective-content" id="reflective-content"></div>
  </div>

  <script>
    (function(){
      var menuBtn=document.getElementById('menuBtn'), sideMenu=document.getElementById('sideMenu'), menuOverlay=document.getElementById('menuOverlay');
      function closeMenu(){sideMenu.classList.remove('active');menuOverlay.classList.remove('show')}
      menuBtn.addEventListener('click',function(){sideMenu.classList.contains('active')?closeMenu():(sideMenu.classList.add('active'),menuOverlay.classList.add('show'))});
      menuOverlay.addEventListener('click',closeMenu);

      var postContainer = document.getElementById('post-container');
      var allPostsData = [];

      function getPostFilename() {
        var params = new URLSearchParams(window.location.search);
        return params.get('file');
      }

      function renderPost(postData, postContent) {
        document.title = postData.title + " ‚Äî Boluadeoye";
        var html = `
          <div class="post-header">
            <div>
              <span class="post-type">${postData.type}</span>
              <h1 class="post-title">${postData.title}</h1>
              <div class="post-meta">
                <span>üìÖ ${new Date(postData.date).toLocaleDateString('en-US',{year:'numeric',month:'short',day:'numeric'})}</span>
                <span>‚è±Ô∏è ${postData.minutes} min read</span>
              </div>
            </div>
          </div>
          <div id="reflective-btn-container"></div>
          <div class="post-content">${marked.parse(postContent)}</div>
          <div class="share-section">
            <h3>Share this post</h3>
            <div class="share-buttons">
              <a href="https://twitter.com/intent/tweet?url=${window.location.href}&text=${encodeURIComponent(postData.title)}" target="_blank" class="share-btn">Twitter</a>
              <a href="https://www.facebook.com/sharer/sharer.php?u=${window.location.href}" target="_blank" class="share-btn">Facebook</a>
              <a href="https://www.linkedin.com/shareArticle?mini=true&url=${window.location.href}&title=${encodeURIComponent(postData.title)}" target="_blank" class="share-btn">LinkedIn</a>
            </div>
          </div>
          <div id="disqus_thread" style="margin-top: 2rem;"></div>
        `;
        postContainer.innerHTML = html;
        loadDisqus(postData.file);

        if (postData.reflection_prompts && postData.reflection_prompts.length > 0) {
          var btnContainer = document.getElementById('reflective-btn-container');
          var btn = document.createElement('button');
          btn.className = 'reflective-btn';
          btn.innerHTML = 'Read Reflectively ‚ú®';
          btn.onclick = function() { startReflectiveReading(postContent, postData); };
          btnContainer.appendChild(btn);
        }
      }

      function startReflectiveReading(postContent, postData) {
        var overlay = document.getElementById('reflective-overlay');
        var contentEl = document.getElementById('reflective-content');
        var paragraphs = postContent.split(/\n\s*\n/).filter(p => p.trim() !== '');
        var prompts = postData.reflection_prompts;
        var storageKey = `reflections-${postData.file}`;
        var responses = JSON.parse(localStorage.getItem(storageKey)) || [];

        var currentStep = 0;
        var totalSteps = paragraphs.length + prompts.length;
        var paragraphIndex = 0;
        var promptIndex = 0;

        function renderStep() {
          var isPromptStep = (paragraphIndex > 0 && promptIndex < prompts.length && paragraphIndex % Math.ceil(paragraphs.length / prompts.length) === 0);
          
          if (promptIndex < prompts.length && isPromptStep) {
            // It's a prompt step
            var currentPromptIndex = promptIndex;
            contentEl.innerHTML = `
              <p class="reflective-prompt">${prompts[currentPromptIndex]}</p>
              <textarea class="reflective-textarea" placeholder="Your private thoughts...">${responses[currentPromptIndex] || ''}</textarea>
              <div class="reflective-nav">
                <button id="reflective-prev">Back</button>
                <span class="reflective-progress">Step ${currentStep + 1} of ${totalSteps}</span>
                <button id="reflective-next" class="primary">Save & Continue</button>
              </div>
            `;
            document.getElementById('reflective-next').onclick = function() {
              responses[currentPromptIndex] = contentEl.querySelector('textarea').value;
              localStorage.setItem(storageKey, JSON.stringify(responses));
              promptIndex++;
              currentStep++;
              renderStep();
            };
             document.getElementById('reflective-prev').onclick = function() {
              currentStep--;
              paragraphIndex--;
              renderStep();
            };
          } else if (paragraphIndex < paragraphs.length) {
            // It's a paragraph step
            contentEl.innerHTML = `
              <div class="reflective-text">${marked.parse(paragraphs[paragraphIndex])}</div>
              <div class="reflective-nav">
                ${currentStep > 0 ? '<button id="reflective-prev">Back</button>' : '<div></div>'}
                <span class="reflective-progress">Step ${currentStep + 1} of ${totalSteps}</span>
                <button id="reflective-next" class="primary">Next</button>
              </div>
            `;
            document.getElementById('reflective-next').onclick = function() {
              paragraphIndex++;
              currentStep++;
              renderStep();
            };
            if(currentStep > 0) {
              document.getElementById('reflective-prev').onclick = function() {
                currentStep--;
                // This logic needs to be smarter to handle going back from a paragraph to a prompt
                if(isPromptStep){ promptIndex--; } else { paragraphIndex--; }
                renderStep();
              };
            }
          } else {
            // It's the end
            var summaryHTML = responses.map((response, index) => `
              <div style="margin-bottom: 1.5rem;">
                <p class="reflective-prompt">${prompts[index]}</p>
                <div class="reflective-text" style="font-size: 1.2rem; background: var(--bg); padding: 1rem; border-radius: var(--radius); white-space: pre-wrap;">${response || 'No response.'}</div>
              </div>`).join('');

            contentEl.innerHTML = `
              <h2 class="post-title">Your Reflections</h2>
              <p class="reflective-prompt">Here are the thoughts you saved. This is for your eyes only and is stored on this device.</p>
              ${summaryHTML}
              <div class="reflective-nav">
                 <button id="reflective-close" class="primary">Finish</button>
              </div>
            `;
            document.getElementById('reflective-close').onclick = function() { overlay.classList.remove('show'); };
          }
        }
        
        overlay.classList.add('show');
        renderStep();
      }

      function loadDisqus(filename) {
        var disqus_config = function () {
          this.page.url = window.location.href;
          this.page.identifier = filename;
        };
        if (window.DISQUS) {
            DISQUS.reset({ reload: true, config: disqus_config });
        } else {
            var d = document, s = d.createElement('script');
            s.src = 'https://boluadeoye.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        }
      }

      function loadPost() {
        var filename = getPostFilename();
        if (!filename) {
          postContainer.innerHTML = "Post not found.";
          return;
        }

        fetch('/Mywebsite/Posts.json', { cache: 'no-store' })
          .then(res => res.json())
          .then(posts => {
            allPostsData = posts;
            var postData = allPostsData.find(p => p.file === filename);
            if (postData) {
              fetch('/Mywebsite/' + postData.file)
                .then(res => res.text())
                .then(content => {
                  renderPost(postData, content);
                });
            } else {
              postContainer.innerHTML = "Post data not found.";
            }
          });
      }

      loadPost();
    })();
  </script>
</body>
</html>
