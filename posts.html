<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>All Posts — Boluadeoye</title>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
  :root {
    --bg: #0f172a; --panel: #111a2e; --panel-hover: #1a2341;
    --ink: #e5eefc; --muted: #94a3b8;
    --orange: #f59e0b; --orange-light: #fbbf24; --orange-ink: #0b0f19;
    --ring: rgba(245,158,11,.25); --radius: 16px;
    --serif: ui-serif, Georgia, "Times New Roman", serif;
    --font: "Open Sans", system-ui, -apple-system, "Segoe UI", Roboto, Inter, Arial, sans-serif;
    --transition: cubic-bezier(.4,0,.2,1);
    --red: #ef4444; --red-soft: rgba(239,68,68,.12);
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;scroll-behavior:smooth}
  body{
    background:var(--bg); color:var(--ink);
    font:16px/1.7 var(--font);
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    overflow-x:hidden; position:relative; text-rendering:optimizeLegibility;
  }
  a{color:inherit;text-decoration:none;transition:all .3s var(--transition)}
  .wrap{max-width:1100px;margin:0 auto;padding:0 1.5rem;position:relative;z-index:1}

  header{position:sticky;top:0;z-index:100;background:rgba(15,23,42,.98);border-bottom:1px solid rgba(245,158,11,.15)}
  .header-row{display:flex;align-items:center;justify-content:space-between;min-height:70px;gap:1.5rem;padding:0 .5rem}
  .brand{display:flex;align-items:center;gap:.75rem;flex-shrink:0;transition:transform .3s var(--transition)}
  .brand:hover{transform:translateX(3px)}
  .dot{
    width:34px;height:34px;border-radius:50%;
    background:radial-gradient(circle at 30% 30%,#ffd27a 0%,#f59e0b 40%,#d97706 100%);
    border:1px solid rgba(245,158,11,.3);
    box-shadow:0 0 0 2px rgba(245,158,11,.15),0 4px 12px rgba(245,158,11,.2);
    position:relative;z-index:0;animation:dot-breathe 3.8s ease-in-out infinite;
    transition:transform .6s var(--transition)
  }
  .dot::after{content:'';position:absolute;inset:-8px;border-radius:50%;
    background:radial-gradient(circle at 50% 50%,rgba(245,158,11,.45) 0%,rgba(245,158,11,.16) 35%,rgba(245,158,11,0) 70%);
    filter:blur(10px);opacity:.75;animation:dot-halo 3.8s ease-in-out infinite;pointer-events:none}
  @keyframes dot-breathe{0%,100%{transform:scale(1)}50%{transform:scale(1.06)}}
  @keyframes dot-halo{0%,100%{opacity:.55;transform:scale(1)}50%{opacity:.9;transform:scale(1.12)}}
  @media (prefers-reduced-motion: reduce){ .dot, .dot::after { animation:none !important; } }
  .brand h1{font-size:1.3rem;font-weight:800;color:var(--ink);letter-spacing:-.5px;font-family:var(--serif)}

  .top-nav{display:none;gap:.5rem;align-items:center;flex-wrap:wrap}
  .top-nav a{padding:.45rem .9rem;border-radius:999px;border:1px solid transparent;font-weight:600;font-size:.87rem}
  .top-nav a:hover,.top-nav a.active{color:var(--orange);border-color:var(--orange);transform:translateY(-1px)}

  .hamburger{width:42px;height:42px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:rgba(255,255,255,.03);border:1px solid rgba(245,158,11,.2);color:var(--ink);cursor:pointer;transition:all .3s ease}
  .hamburger:hover{background:rgba(245,158,11,.1);transform:rotate(10deg)}
  .hamburger svg{width:19px;height:19px}

  .side-menu{position:fixed;top:0;left:-280px;z-index:200;width:260px;height:100%;padding:2.5rem 1.2rem 2rem;display:flex;flex-direction:column;gap:.6rem;background:var(--panel);border-right:1px solid rgba(245,158,11,.2);transition:left .3s var(--transition)}
  .side-menu.active{left:0}
  .side-menu a{padding:.9rem 1.25rem;border-radius:8px;background:transparent;color:var(--ink);font-weight:600;font-size:.92rem;border:1px solid transparent;transition:all .2s ease}
  .side-menu a:hover,.side-menu a.active{background:rgba(245,158,11,.1);border-color:var(--orange);color:var(--orange);transform:translateX(5px)}
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:150;display:none;cursor:pointer}
  .overlay.show{display:block}
  @media(min-width:880px){.top-nav{display:flex}.hamburger{display:none}}

  .page-header { text-align:center; padding: 2.5rem 0 2rem; }
  .page-header h1 { font-size: 2.5rem; color: var(--orange); font-weight: 800; margin-bottom: 0.5rem; }
  .page-header p { font-size: 1.1rem; color: var(--muted); max-width: 60ch; margin: 0 auto; }

  .filter-bar { display: flex; justify-content: center; gap: 0.75rem; margin-bottom: 2.5rem; flex-wrap: wrap; }
  .filter-btn {
    padding: 0.5rem 1rem;
    border: 1px solid rgba(245,158,11,.2);
    background: var(--panel);
    color: var(--muted);
    border-radius: 999px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  .filter-btn:hover { background: var(--panel-hover); color: var(--orange); }
  .filter-btn.active { background: var(--orange); color: var(--orange-ink); border-color: var(--orange); }

  .posts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 1.5rem;
  }
  .post-card {
    background: var(--panel);
    border-radius: var(--radius);
    border: 1px solid rgba(245,158,11,.15);
    overflow: hidden;
    transition: all 0.3s ease;
    display: none; /* Hidden by default */
  }
  .post-card.visible {
    display: block;
  }
  .post-card:hover { transform: translateY(-5px); border-color: var(--orange); }
  .card-image {
    height: 180px;
    background-color: rgba(255,255,255,.02);
    background-size: cover;
    background-position: center;
  }
  .card-content { padding: 1.25rem; }
  .card-type {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    background: rgba(245,158,11,.1);
    color: var(--orange);
    border-radius: 999px;
    font-size: 0.8rem;
    font-weight: 700;
    text-transform: capitalize;
  }
  .card-title { font-size: 1.25rem; font-weight: 700; margin: 0.75rem 0; color: var(--ink); }
  .card-excerpt { color: var(--muted); font-size: 0.95rem; line-height: 1.6; }
  .no-posts-message {
    text-align: center;
    padding: 3rem;
    color: var(--muted);
    background: var(--panel);
    border-radius: var(--radius);
    display: none;
  }

  .loading-container{
    min-height:160px;
    display:flex;
    align-items:center;
    justify-content:center;
    color:var(--muted);
  }
  .loading-spinner{
    width:36px;
    height:36px;
    border:3px solid rgba(245,158,11,.2);
    border-top-color:var(--orange);
    border-radius:50%;
    animation:spin 1s linear infinite;
  }
  @keyframes spin{to{transform:rotate(360deg)}}
  
  footer{
    background:var(--panel);
    border-top:1px solid rgba(255,255,255,.06);
    color:var(--muted);
    text-align:center;
    font-size:.85rem;
    padding:1.5rem 0;
    margin-top:2.5rem;
  }
  </style>
</head>
<body>
  <nav id="sideMenu" class="side-menu">
    <a href="./">Home</a>
    <a href="./posts.html" class="active">All Posts</a>
    <a href="./library.html">Library</a>
    <a href="./about.html">About</a>
  </nav>
  <div id="menuOverlay" class="overlay"></div>

  <header id="header">
    <div class="wrap header-row">
      <button id="menuBtn" class="hamburger" aria-label="Open menu" aria-expanded="false">
        <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <rect x="4" y="6" width="16" height="2" rx="1"/>
          <rect x="4" y="11" width="16" height="2" rx="1"/>
          <rect x="4" y="16" width="16" height="2" rx="1"/>
        </svg>
      </button>
      <a class="brand" href="./"><span class="dot" aria-hidden="true"></span><h1>Boluadeoye</h1></a>
      <nav class="top-nav" aria-label="Primary">
        <a href="./">Home</a>
        <a href="./posts.html" class="active">All Posts</a>
        <a href="./library.html">Library</a>
        <a href="./about.html">About</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <div class="page-header">
      <h1>All Posts</h1>
      <p>Browse through the full collection of devotionals, stories, articles, and essays.</p>
    </div>

    <div class="filter-bar" id="filter-bar">
      <button class="filter-btn active" data-filter="all">All</button>
      <button class="filter-btn" data-filter="devotional">Devotionals</button>
      <button class="filter-btn" data-filter="story">Stories</button>
      <button class="filter-btn" data-filter="article">Articles</button>
      <button class="filter-btn" data-filter="essay">Essays</button>
    </div>

    <div class="posts-grid" id="posts-grid">
      <div class="loading-container">
        <div class="loading-spinner"></div>
      </div>
    </div>
    <p class="no-posts-message" id="no-posts-message">No posts found for this category.</p>
  </main>

  <footer>
    <div class="wrap"><p>© 2025 Boluadeoye • Crafted with passion</p></div>
  </footer>

  <script>
  (function(){
    var allPosts = []; // To store the fetched posts

    function bindMenu(){
      var menuBtn = document.getElementById('menuBtn');
      var sideMenu = document.getElementById('sideMenu');
      var menuOverlay = document.getElementById('menuOverlay');
      if (!menuBtn || !sideMenu || !menuOverlay) return;

      function closeMenu(){
        sideMenu.classList.remove('active');
        menuOverlay.classList.remove('show');
        menuBtn.setAttribute('aria-expanded','false');
      }
      function openMenu(){
        sideMenu.classList.add('active');
        menuOverlay.classList.add('show');
        menuBtn.setAttribute('aria-expanded','true');
      }
      menuBtn.addEventListener('click', function(){
        if (sideMenu.classList.contains('active')) closeMenu(); else openMenu();
      });
      menuOverlay.addEventListener('click', closeMenu);
    }
    
    function renderPosts(posts) {
        var grid = document.getElementById('posts-grid');
        if (!grid) return;

        if (!posts || posts.length === 0) {
            grid.innerHTML = '';
            document.getElementById('no-posts-message').style.display = 'block';
            return;
        }

        document.getElementById('no-posts-message').style.display = 'none';
        var html = '';
        posts.forEach(function(post) {
            var postUrl = './post.html?file=' + encodeURIComponent(post.file);
            var coverStyle = post.cover ? 'style="background-image: url(\'' + post.cover + '\')"' : '';

            html += 
                '<a href="' + postUrl + '" class="post-card visible" data-category="' + post.type + '">' +
                '  <div class="card-image" ' + coverStyle + '></div>' +
                '  <div class="card-content">' +
                '    <span class="card-type">' + post.type + '</span>' +
                '    <h2 class="card-title">' + post.title + '</h2>' +
                '    <p class="card-excerpt">' + post.excerpt + '</p>' +
                '  </div>' +
                '</a>';
        });
        grid.innerHTML = html;
    }

    function filterPosts(filter) {
        var filtered = [];
        if (filter === 'all') {
            filtered = allPosts;
        } else {
            filtered = allPosts.filter(function(post) {
                return post.type === filter;
            });
        }
        renderPosts(filtered);
    }

    function setupFilters() {
        var filterBar = document.getElementById('filter-bar');
        var buttons = filterBar.querySelectorAll('.filter-btn');
        
        buttons.forEach(function(button) {
            button.addEventListener('click', function() {
                // Update active button style
                buttons.forEach(function(btn) { btn.classList.remove('active'); });
                this.classList.add('active');
                
                // Get the filter value from the data-filter attribute
                var filterValue = this.getAttribute('data-filter');
                filterPosts(filterValue);
            });
        });
    }

    function loadAllPosts() {
        fetch('./Posts.json', { cache: 'no-store' })
            .then(function(res) {
                if (!res.ok) throw new Error('Could not load Posts.json');
                return res.json();
            })
            .then(function(posts) {
                // Sort posts by date, newest first
                allPosts = posts.sort(function(a, b) {
                    return new Date(b.date) - new Date(a.date);
                });
                renderPosts(allPosts);
                setupFilters();
            })
            .catch(function(err) {
                var grid = document.getElementById('posts-grid');
                if(grid) grid.innerHTML = '<p style="color:var(--muted);text-align:center;">Could not load posts. Please try again later.</p>';
                console.error(err);
            });
    }

    function init() {
        bindMenu();
        loadAllPosts();
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }
  })();
  </script>
</body>
</html>
